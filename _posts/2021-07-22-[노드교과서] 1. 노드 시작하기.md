---
title:  "[Nods.js 교과서] 1.노드 시작하기"
excerpt: "노드에 대하여"

categories:
  - node.js
tags:
  - [자바스크립트,javascript,node.js]

toc: true
toc_sticky: true
 
date: 2021-07-22
last_modified_at: 2021-07-22
---

# 노드의 정의
## Node : 크롬 V8 자바스크립트 엔진으로 빌드된 자바스크립트 실행기(런타임)

### 노드는 서버인가?
- 서버의 역할도 할 수 있는 자바스크립트 런타임이다!
- 노드로 자바스크립트로 작성된 서버를 실행할 수 있는것이다. 

--> 정의를 제대로 이해하고 혼동하지 말자!!

# 내부구조
- 내부는 C언어나 C++언어로 작성되어있다.
- 근데 왜 자바스크립트로?? -> c,c++의 생산성이 떨어지기 때문
- libub : 비동기 I/O 
- 싱글스레드 모델 
- 이벤트 기반

## 1. 이벤트 기반 
- 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식 
- 클릭, 네트워크 요청 등등..
- 콜백 함수 : 이벤트가 발생했을 때 실행될 함수 
- 메모리에 특정 동작들을 등록해 놓는다. 
## 2. 논블로킹 I/O
- 노드는 블로킹이면서 동기 , 비동기면서 논블로킹이 있다. 
- 논블로킹 : 오래 걸리는 함수를 백드라운드로 보내서 다음 코드가 먼저 실행되게 하고 나중에 오래 걸리는 함수를 실행 
- 논 블로킹 방식 하에서 일부 코드는 백그라운드에서 병렬로 실행된다. 
- 동기면 코드가 순서대로 , 비동기면 순서대로 실행되지 않는다. 
## 3. 플로세스, 스레드
- 프로세스 : 운영체제 내에서 할당하는 작업의 단위 , 프로세스간 자원 공유 x
- 스레드 : 프로세스 내에서 실행되는 작업의 단위, 부모 프로세스 자원 공유
- 노드 프로세스는 멀티 스레드 이지만 직접 다룰 수 있는 스레드는 하나이기 때문에 싱글 스레드라고 표현
- 노드는 주로 멀티 스레드 대신 멀티 프로세스 
- 14버전부터 멀티 스레드 사용(하지만 주력은 싱글 스레드)
- 멀티 스레딩을 하면 되지 않나? -> 코딩 난이도가 무지 높다. 온전한 효율을 가져오기가 매우 힘들 수 있다. 
## 4. 싱글 스레드 
- 싱글 스레드라 주어진 일을 하나밖에 처리 하지 못함
- 블로킹 발생? -> 모두 대기 = 비효율
- 싱글 스레드는 에러를 처리하지 못하는 경우 멈춘다. (근데 왜??? 프로그래밍 난이도가 쉽고 cpu , 메모리 자원을 적게 사용한다.)
- 그럼 멀티 스레드 모델은??? 에러 시 새로운 스레드 생성하면 됨 (하지만 스레드를 생성하는 자체 와 놀고있는 스레드의 처리비용, 프로그래밍 난이도, 스레드가 많을 수록 소비되는 자원이 단점이 될 수 있다.)
- 그러면 노드는 결국 어떻게 하는데? - > 논블로킹 모델을 채택해서 요청을 먼저 받고 일이 다 끝나면 응답, I/O관련 코드가 아닌 경우 싱글 스레드 블로킹 모델과 같아진다. 
- 그러면 노드는 결국 어떻게 하는데? ver2 -> 스레드가 하나인 노드 프로세스를 여러개 만든다. -> 멀티 프로세싱

