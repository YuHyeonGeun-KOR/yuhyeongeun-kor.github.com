---
title:  "인터럽트"
excerpt: "프로세스와 스케쥴러의 이해"
categories:
  - CS
tags:
  - [CS, 운영체제]

toc: true
toc_sticky: true
 
date: 2021-12-16
last_modified_at: 2021-12-16
---

# 인터럽트 
- cpu가 프로그램을 실행하고 있을 때, 입출력이나 예외상황이 발생하여 처리가 필요할 경우 cpu에 알려서 처리하는 기술
## 그럼 어떻게 장치와 커뮤니케이션을 하는가?
![](/yuhyeongeun-kor.github.com/assets/images/12-16-12-13.png)
- 프로세스가 running 중에 스케쥴러가 프로세스의 교체를 위해서 해당 프로세스를 중단 시킨다. 
- 이떄 스케쥴러가 현재 진행중인 프로세스를 중단 시키기 위해서 인터럽트를 발생

### 인터럽트의 역할 
- 저장매채에서 데이터를 처리하는 과정이 완료되면 , 프로세스를 꺠워준다. (block state -> ready state)
- 예외상황을 핸들링 해준다. (cpu가 프로그램을 실행하는 와중에 i/o 작업이나 0으로 나누기 같은 예외상황이 발생할 경우 cpu는 연산이 불가능 하므로 운영체제가 cpu에 해당 프로세스를 kill하라는 인터럽트를 발생한다.)
- 일종의 이벤트로 불리며 이벤트에 따라 운영체제가 처리할 수 있게 한다. 

ex) 0으로 나누기 , timer 인터럽트

## 인터럽트의 종류
### 내부인터럽트 
- 주로 프로그램 내부에서 잘못된 명령 , 데이터 사용시 발생 
- 0으로 나누기 , 사용자 모드에서 허용되지 않는 명령 , 공간 접근 시 
- 계산 결과가 overflow, underflow가 날 때 
### 외부 인터럽트 
- 주로 하드웨어에서 발생하는 이벤트 
- 전원이상 , i/o 이벤트 , timer 이벤트(timer관련 칩이 내장 되어있다.)


## 시스템 콜 인터럽트 
- 시스템 콜 실행을 위해서 강제로 코드에 인터럽트 명령을 넣어 cpu에서 실행
- 시스템 콜 인터럽트 명령 호출 (ex.0x80을 넘김)-> CPU는 사용자 모드를 커널모드로 전환 -> IDT(inturrupt Descriptor Table)에서 0x80에 해당 하는 시스템 콜 함수를 실행 -> 시스템 콜 함수에서 eax에 해당 하는 시스템 콜 번호를 찾고 해당 시스템 콜 함수를 실행한다. -> 시스템콜 함수를 실행하고 다시 커널모드에서 사용자 모드로 전환 

***IDT는 컴퓨터 부팅시에 미리 정의되어있는 번호와 실행코드를 가리키는 주소를 기록하는 테이블로 운영체제가 운영체제 내부코드를 기록한다.***

